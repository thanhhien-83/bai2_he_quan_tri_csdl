![Screenshot 2025-03-24 182419](https://github.com/user-attachments/assets/e4f4586c-48ac-4f7a-966b-3e3c4dbde5cd)# bai2_he_quan_tri_csdl
Bài tập 02 của sv: K225480106016 - Hứa Thị Thanh Hiền - Môn Hệ quản trị csdl  
Ảnh 1:  
Nhấp chuột phải vào Databases → Chọn New Database... để tạo cơ sở dữ liệu mới    
![Screenshot 2025-03-23 214553](https://github.com/user-attachments/assets/b0233f69-5cfb-4fa5-8064-94c1211cdf2f)  

Ảnh 2:  
Nhập tên cơ sở dữ liệu là QLSV → Thiết lập đường dẫn lưu trữ → Nhấp vào OK để tạo cơ sở dữ liệu.  
![Screenshot 2025-03-23 214808](https://github.com/user-attachments/assets/b46f874b-7d35-4c1a-bdfa-171c64dbc96f)    

Ảnh 3:  
Chuột phải vào Tables trong cơ sởQLSV database trong QLSV cơ sở dữ liệu → Chọn New → Table... để tạo mới bảng.    
![Screenshot 2025-03-23 214855](https://github.com/user-attachments/assets/7039c259-ee22-4e2e-a77d-32c2104204b6)  

Ảnh 4:  
Chọn cột masv → Nhấn vào biểu tượng khóa trên thanh công cụ → Chọn Đặt khóa chính để thiết lập để đặt cột masv làm khóa chính.  
![Screenshot 2025-03-23 215124](https://github.com/user-attachments/assets/e264ecb6-48da-464d-945b-266ddcb39877)  

Ảnh 5: 
Sau khi tạo bảng, một hộp thoại yêu cầu nhập bảng tên sẽ xuất hiện.
Nhập tên Sinhvien vào ô Nhập tên cho bảng .
Nhấn OK để xác nhận.  
![Screenshot 2025-03-23 215205](https://github.com/user-attachments/assets/159b24b9-1bee-43cb-bde6-25e65ce94eda)   

Ảnh 6:  
Chuột phải vào Tables trong cơ sở dữ liệu QLSV.  
Chọn Refresh để cập nhật danh sách bảng, giúp hiển thị các bảng mới tạo hoặc thay đổi  
![Screenshot 2025-03-23 215229](https://github.com/user-attachments/assets/09da4110-c117-4438-b14b-eba83c56750d)  

Ảnh 7:  
Nhập tên bảng là Lop vào hộp thoại Choose Name và nhấn OK để xác nhận  
![Screenshot 2025-03-23 215338](https://github.com/user-attachments/assets/9c38be85-af1f-4884-b446-96cb70bde46d)  

Ảnh 8:  
Nhập tên bảng là GVCN vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 215521](https://github.com/user-attachments/assets/531c81a8-dda0-4beb-80b4-45ea30bbdb37)  

Ảnh 9:   
Nhập tên bảng là LopSV vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 215830](https://github.com/user-attachments/assets/4c8586dd-3ef9-4b48-8371-cb9fa509ab95)  

Ảnh 10:  
Nhập tên bảng là GiaoVien vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220028](https://github.com/user-attachments/assets/e9cea1ee-7a2c-4dae-bd3c-c3f2351a5743)  

Ảnh 11:  
Nhập tên bảng là BoMon vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220159](https://github.com/user-attachments/assets/5e83143e-5cff-45f1-a81b-7cada1439dde)  

Ảnh 12:  
Nhập tên bảng là Khoa vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220317](https://github.com/user-attachments/assets/5651637d-4a32-4fa0-aa26-7d522abafe6c)  

Ảnh 13:  
Nhập tên bảng là MonHoc vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220439](https://github.com/user-attachments/assets/1e6e5972-8226-400a-af1a-96b7aefb4238)  

Ảnh 14:  
Nhập tên bảng là LopHP vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220637](https://github.com/user-attachments/assets/4c4cc4d0-eee3-484b-b80e-508954a6dd68)  

Ảnh 15:  
Nhập tên bảng là DKMH vào hộp thoại Choose Name và nhấn OK để xác nhận.  
![Screenshot 2025-03-23 220840](https://github.com/user-attachments/assets/730c4933-c342-4bf6-b36a-604dc8987bea)  

Ảnh 16:  
Chọn Kiểm tra ràng buộc từ menu.  
Trong hộp thoại Check Constraints , nhấn Add để thêm nút buộc mới.  
Nhập biểu thức kiểm tra vào ô Expression :  
Đây là điều kiện đảm bảo giá trị của HK nằm trong khoảng từ 0 đến 3  
![Screenshot 2025-03-23 221743](https://github.com/user-attachments/assets/5589d6cd-ca59-4fd7-b70b-790eaa141d56)  

Ảnh 17:  
Chọn Kiểm tra ràng buộc từ menu.  
Nhấn Add để thêm một lệnh xóa mới.  
Điều này đảm bảo rằng giá trị của STC chỉ có thể nằm trong khoảng từ 1 đến 6  
![Screenshot 2025-03-23 222220](https://github.com/user-attachments/assets/6669b52c-23c9-4f93-830a-5877736a007d)  

Ảnh 18:  
Chọn Kiểm tra ràng buộc từ menu  
Điều này đảm bảo giá trị của HK chỉ có thể nằmchỉ có thể nằm trong khoảng từ 1 đến 3  
![Screenshot 2025-03-23 222414](https://github.com/user-attachments/assets/6721bc19-8772-497d-8feb-963f74be5474)  

Ảnh 19:  
Chọn kiểm tra ràng buộc  
Điều này đảm bảo rằng giá trị của diemtp chỉ có thể nằm trong khoảng từ 1 đến 10  
![Screenshot 2025-03-23 222643](https://github.com/user-attachments/assets/8bbdaf92-abec-4c3b-8832-1e444ae3fcc5)  

Ảnh 20:  
Điều này đảm bảo rằng giá trị của diemthi chỉ có thể nằm trong khoảng từ 1 đến 10  
![Screenshot 2025-03-23 222749](https://github.com/user-attachments/assets/b5353053-f872-466d-a990-29f8fd03432a)  

Ảnh 21:  
Đảm bảo rằng giá trị của phantramthi luôn nằm trong khoảng 0 đến 100.   
![Screenshot 2025-03-23 222927](https://github.com/user-attachments/assets/79465e2b-b7f9-4dfe-a1a7-8f46179564f2)  

Ảnh 22: 
Thêm khóa ngoại lệ (FK_GVCN_malop)vớicột liên kết malopcủa bảng GVCNvới maloptrong bảng Lop. 
  
![Screenshot 2025-03-23 224140](https://github.com/user-attachments/assets/7218aa86-d5f3-44f1-90ea-5e87cdf913c2)  

Ảnh 23:  
Mở cửa sổ mối quan hệ khóa ngoại.  
Đặt tên FK_GVCN_magv  
Chọn bảng chính ( GiaoVien) và bảng phụ ( GVCN).  
Liên kết chính cột khóa ( magv) với cột tương ứng trong bảng phụ.  
Nhấn OK để lưu thiết lập  
![Screenshot 2025-03-23 224439](https://github.com/user-attachments/assets/f277f6a5-f62a-484c-b0ef-778e2431cb16)  

Ảnh 24:  
Thiết lập quan hệ khóa ngoại giữa hai bảng: Lop (bảng chính) và LopSV (bảng có khóa ngoại).  
 • Khóa ngoại FK_LopSV_malop được tạo, liên kết cột malop giữa hai bảng.  
 • Các tùy chọn ràng buộc:  
 • Enforce Foreign Key Constraint: Được bật.  
 • Delete Rule: No Action (không xóa bản ghi liên quan).  
 • Update Rule: Cascade (cập nhật theo khi giá trị khóa chính thay đổi)  
![Screenshot 2025-03-23 225031](https://github.com/user-attachments/assets/91eaba1c-c14a-495e-96f4-34ffdbe84f9d)  

Ảnh 25:  
Mở cửa sổ thiết lập khóa ngoại.  
 • Đặt tên FK_GiaoVien_BoMon.  
 • Chọn bảng chính BoMon, bảng phụ GiaoVien.  
 • Liên kết cột mabm giữa hai bảng.  
 • Chọn Delete Rule: No Action, Update Rule: Cascade.  
 • Nhấn OK để lưu  
![Screenshot 2025-03-23 225839](https://github.com/user-attachments/assets/d3a1048f-ab60-4065-b14a-224e6bf66189)  

Ảnh 26:  
Mở cửa sổ thiết lập khóa ngoại.  
 • Đặt tên FK_BoMon_makhoa.  
 • Chọn bảng chính Khoa, bảng phụ BoMon.  
 • Liên kết cột makhoa giữa hai bảng.  
 • Nhấn OK để lưu.  
![Screenshot 2025-03-23 230058](https://github.com/user-attachments/assets/7aed1540-be9f-46a8-9f2a-0b8f7b38f3c6)  

Ảnh 27:  
• Mở cửa sổ thiết lập khóa ngoại.  
• Đặt tên FK_LopHP_mamon.  
• Chọn bảng chính MonHoc, bảng phụ LopHP.  
• Liên kết cột mamon giữa hai bảng.  
• Nhấn OK để lưu.  
![Screenshot 2025-03-23 230254](https://github.com/user-attachments/assets/155243e8-ab82-42a8-aecc-30490a301f21)  

Ảnh 28:  
• Mở cửa sổ thiết lập khóa ngoại.  
• Đặt tên FK_LopHP_magv.  
• Chọn bảng chính GiaoVien, bảng phụ LopHP.  
• Liên kết cột magv giữa hai bảng.  
• Nhấn OK để lưu.  
![Screenshot 2025-03-23 230421](https://github.com/user-attachments/assets/891aeb4d-c27f-4c38-805a-89d4fbdc79cf)  

Ảnh 29:  
• Tạo khóa ngoại FK_DKMH_malophp.  
• Chọn bảng chính LopHP, bảng phụ DKMH.  
• Liên kết cột malophp giữa hai bảng.  
• Thiết lập ràng buộc No Action khi xóa, Cascade khi cập nhật.  
• Nhấn OK để lưu.  
![Screenshot 2025-03-23 230619](https://github.com/user-attachments/assets/0db9b81b-de4d-4c23-810a-f30a2d820bac)  

Ảnh 30:  
• Tạo khóa ngoại FK_DKMH_masv.  
• Chọn bảng chính Sinhvien, bảng phụ DKMH.  
• Liên kết cột masv giữa hai bảng.  
• Thiết lập ràng buộc No Action khi xóa, Cascade khi cập nhật.  
• Nhấn OK để lưu.  
![Screenshot 2025-03-23 230734](https://github.com/user-attachments/assets/5b25d1da-9d1e-4e66-934f-67ddf022fa18)  

Ảnh 31:  
Chọn cơ sở dữ liệu QLSV để thao tác.    
Viết câu lệnh SQL để tạo bảng SinhVienvới các cột:  
• maSV(kiểu INT, khóa chính PRIMARY KEY).  
• hoTen(kiểu NVARCHAR(100), ràng buộc NOT NULL).  
• ngaySinh(kiểu DATE, ràng buộc NOT NULL).  
Chạy lệnh SQL bằng cách nhấn nút Execute.  
Kiểm tra kết quả trong phần Messages, xác nhận rằng lệnh đã thực hiện thành công với thông báo"Commands completed successfully."  
![Screenshot 2025-03-24 175305](https://github.com/user-attachments/assets/5b6c2643-1c5e-4568-ac97-fc0242e5141f)  

Ảnh 32:  
• Tạo cơ sở dữ liệuQLSV bằng SQL lệnh:  
• Tệp chính nghĩa tại đường dẫn :Tệp chính định nghĩa ( .mdf) tại đường dẫn D:\Học Tập\Hệ quản trị cơ sở dữ liệu\QLSV.mdf:  
Kích thước ban đầu:10MB  
Kích thước tối đa:100MB  
Tăng trưởng:10%  
• Nhật ký tệp định nghĩa ( .ldf) tại đường dẫn D:\Học Tập\Hệ quản trị cơ sở dữ liệu\QLSV_log.ldf:  
Kích thước ban đầu:5MB  
Kích thước tối đa:50MB  
Tăng trưởng:5MB  
• Thực hiện lệnh SQL bằng cách nhấn Execute, kết quả sẽ hiển thị trong Messagesthông báo "Commands completed successfully.", xác nhận việc tạo cơ sở dữ liệu thành công.  
![Screenshot 2025-03-24 180408](https://github.com/user-attachments/assets/ce252182-ee20-42ce-bad6-c433317e3481)  

Ảnh 33: 
Chọn cơ sở dữ liệu QLSV để thao tác.  
Tạo bảngKhoa với các cột:  
maKhoa(kiểu CHAR(10), khóa chính PRIMARY KEY).  
Thực hiện lệnh SQL bằng cách nhấn Execute  
tenKhoa(kiểu NVARCHAR(100), ràng buộc NOT NULL).
Kiểm tra bảngKhoa trong Object Explorer :
Đã xuất hiện bảng dbo.Khoatrong danh sách Tablescủa cơ sở dữ liệu QLSV.
![Screenshot 2025-03-24 182419](https://github.com/user-attachments/assets/ed40d986-85ce-4dd1-ad72-a1d4ecca019a)

Ảnh 34:  
Tạo bảng BoMon với liên maKhoa kết ngoại khóa Khoa(maKhoa), có thể ON DELETE CASCADEtự động xóa khi Khoa bị xóa. Lệnh chạy thành công.  
![Screenshot 2025-03-24 182522](https://github.com/user-attachments/assets/a6f217fe-69a1-4db7-a370-3afde1b58f09)  

Ảnh 35:  
Tạo bảng GiaoVien với khóa chính maGV và khóa ngoại maBM tham chiếu BoMon(maBM)  
Thực hiện lệnh SQL bằng cách nhấn Execute để chạy.  
![Screenshot 2025-03-24 182659](https://github.com/user-attachments/assets/19e8f954-8277-4c16-a39c-a26bf38f5a54)  

Ảnh 36:  
Tạo bảng SinhVien với khoá chính là masv.  
Thực hiện lệnh SQL bằng cách nhấn Execute để chạy. 
Làm mới (Refresh) danh sách bảng trongtrong Object Explorer.  
![Screenshot 2025-03-24 182727](https://github.com/user-attachments/assets/803a1148-3493-459f-a6cb-f80cfee1c4f7)  

Ảnh 37:  
Tạo bảng Lop với khoá chính là maLop.   
Nhấn Execute để chạy.  
Làm mới (Refresh) danh sách bảng trongtrong Object Explorer.  
![Screenshot 2025-03-24 182814](https://github.com/user-attachments/assets/1b0ca933-deff-4bca-8741-5ee934043936)  

Ảnh 38:  
Tạo bảng GVCN.  
Khóa chính: Kết hợp 3 cột maLop, hanmagv, HK để đảm bảo tính duy nhất.  
![Screenshot 2025-03-24 182853](https://github.com/user-attachments/assets/dc0fdfac-f71d-48fe-a7df-a7fa16173a13)  

Ảnh 39:  
Tạo bảng LopSV.  
Khóa chính: maLopvà maSV kết hợp để đảm bảo mỗi sinh viên chỉ thuộc một lớp duy nhất.  
Nhấn Execute để chạy.  
Làm mới (Refresh) danh sách bảng trongtrong Object Explorer.  
![Screenshot 2025-03-24 182935](https://github.com/user-attachments/assets/29226b5c-7869-49a9-a601-8cc677b17c0a)  

Ảnh 40: 
Tạo bảng MonHoc.  
Khóa chính: mamonlà mã môn học duy nhất.  
Ràng buộc CHECK : STC > 0đảm bảo số tín hiệu chỉ lớn hơn 0.  
![Screenshot 2025-03-24 183011](https://github.com/user-attachments/assets/e2e29487-9a89-4845-b50a-7e3336c2ef61)  

Ảnh 41:  
Tạo bảng LopHP.  
Khóa chính: maLopHP là mã lớp học phần duy nhất.  
Ràng buộc khóa ngoại lệ (FOREIGN KEY) :  
maMon tham chiếu MonHoc(mamon), có ON DELETE CASCADE , nghĩa là nếu xóa môn học thì tất cả các lớp học phần liên quan cũng bị xóa.  
maGV tham chiếu GiaoVien(magv), có ON DELETE SET NULL , nghĩa là nếu xóa học viên thì `mamaGVtrong phần học của lớp sẽ thành công NULL.  
![Screenshot 2025-03-24 183111](https://github.com/user-attachments/assets/4f9ab2c9-1b2b-4532-a94d-44e85c8563a9)  

Ảnh 42:  
Tạo bảng DKMH.  
Khoá chính: maLopHP, maSV đảm bảo mỗi sinh viên chỉ có một lần đăng ký duy nhất cho một phần học sinh.  
![Screenshot 2025-03-24 183155](https://github.com/user-attachments/assets/9996d162-9c07-42b5-a4c9-a4edec642e9f)













